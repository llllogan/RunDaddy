<div class="min-h-screen bg-rd-background text-rd-primary">
  <header class="border-b border-white/10 bg-gradient-to-r from-[#0b1020] via-[#0e1530] to-[#070b18]">
    <div class="mx-auto flex max-w-6xl flex-col gap-6 px-6 py-6 lg:flex-row lg:items-center lg:justify-between lg:px-12">
      <div class="flex items-center gap-3">
        <span class="flex h-10 w-10 items-center justify-center rounded-xl bg-rd-accent/20 text-lg font-semibold text-rd-accent">RD</span>
        <div>
          <p class="text-xs font-semibold uppercase tracking-[0.32em] text-rd-secondary">RunDaddy</p>
          <p class="text-lg font-semibold text-white">Operations Control</p>
        </div>
      </div>
      <div class="flex flex-col items-stretch gap-4 sm:flex-row sm:items-center sm:justify-end sm:gap-6">
        <nav class="flex flex-wrap items-center gap-2">
          <button
            *ngFor="let tab of tabs"
            type="button"
            (click)="setTab(tab.id)"
            [class]="[
              'rounded-full px-5 py-2 text-sm font-semibold transition',
              activeTab() === tab.id
                ? 'bg-white text-black shadow-[0_12px_28px_-20px_rgba(95,108,251,0.9)]'
                : 'bg-white/10 text-rd-secondary hover:bg-white/20'
            ].join(' ')"
          >
            {{ tab.label }}
          </button>
          <a
            routerLink="/"
            class="rounded-full border border-white/15 px-5 py-2 text-sm font-semibold text-rd-secondary transition hover:border-white/30 hover:text-white"
          >
            Marketing Site
          </a>
        </nav>
        <div class="flex items-center justify-between gap-3 rounded-full border border-white/10 bg-white/5 px-4 py-2 sm:justify-end">
          <div class="text-right">
            <p class="text-xs font-semibold uppercase tracking-[0.2em] text-rd-secondary">Signed in</p>
            <p class="text-sm font-medium text-white">
              {{ user()?.firstName ? user()?.firstName + ' ' + (user()?.lastName ?? '') : '—' }}
            </p>
            <p class="text-xs text-rd-secondary">{{ company()?.name || '—' }}</p>
          </div>
          <button
            type="button"
            (click)="logout()"
            class="rounded-full border border-white/20 px-4 py-2 text-xs font-semibold text-white transition hover:border-white/40 hover:bg-white/10"
          >
            Log out
          </button>
        </div>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-6 py-10 lg:px-12">
    <section *ngIf="activeTab() === 'home'; else pickersView" class="grid gap-6 lg:grid-cols-[2fr_1fr]">
      <article
        class="flex flex-col justify-between rounded-3xl border border-white/10 bg-white/[0.04] p-8 backdrop-blur shadow-rd-card"
        (drop)="onDrop($event)"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
      >
        <div>
          <h2 class="text-2xl font-semibold text-white">Upload pick list</h2>
          <p class="mt-3 text-sm leading-6 text-rd-secondary">
            Drag & drop a spreadsheet exported from your warehouse system. RunDaddy parses SKUs, builds picker routes,
            and schedules vending bins automatically.
          </p>
          <div
            class="mt-8 flex flex-1 flex-col items-center justify-center rounded-2xl border border-dashed transition"
            [class]="[
              'border-white/20 bg-black/30 px-6 py-12 text-center',
              isDragging() ? 'border-rd-accent/80 bg-rd-accent/10' : ''
            ].join(' ')"
          >
            <svg class="h-12 w-12 text-rd-accent" viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.8">
              <path d="M24 32V8m0 0 7.5 7.5M24 8l-7.5 7.5M12 32v6a2 2 0 0 0 2 2h20" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M36 26h-4m4 8H16a2 2 0 0 1-2-2v-4" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <p class="mt-5 text-sm font-medium text-white">
              Drop your Excel or CSV file here
            </p>
            <p class="mt-2 text-xs text-rd-muted">Supports .xlsx, .xls, and .csv</p>
            <label
              class="mt-6 inline-flex cursor-pointer items-center rounded-full bg-gradient-to-r from-rd-accent to-rd-accent-strong px-5 py-2 text-sm font-semibold text-white shadow-[0_14px_32px_-22px_rgba(95,108,251,0.9)] transition hover:brightness-110"
            >
              <input type="file" accept=".xlsx,.xls,.csv" class="hidden" (change)="onFileSelect($event)" multiple />
              Browse files
            </label>
          </div>
        </div>
        <div *ngIf="hasFiles()" class="mt-10 space-y-4">
          <h3 class="text-sm font-semibold text-white">Recent uploads</h3>
          <ul class="space-y-3">
            <li
              *ngFor="let upload of uploadedFiles(); let i = index"
              class="flex items-center justify-between rounded-xl border border-white/10 bg-black/20 px-4 py-3"
            >
              <div>
                <p class="text-sm font-medium text-white">{{ upload.file.name }}</p>
                <p class="text-xs text-rd-muted">
                  {{ formatFileSize(upload.file.size) }} · Received {{ upload.receivedAt | date : 'shortTime' }}
                </p>
              </div>
              <button
                type="button"
                (click)="removeFile(i)"
                class="rounded-full border border-white/10 px-3 py-1 text-xs font-semibold text-rd-secondary transition hover:border-white/30 hover:text-white"
              >
                Remove
              </button>
            </li>
          </ul>
        </div>
      </article>

      <aside class="space-y-6">
        <div class="rounded-3xl border border-white/10 bg-white/[0.05] p-6 shadow-rd-card">
          <h3 class="text-sm font-semibold text-white">Processing queue</h3>
          <p class="mt-2 text-xs text-rd-secondary">
            Files dropped here are parsed instantly. Notification lands in your inbox once pick waves are ready.
          </p>
          <div class="mt-6 space-y-3 text-xs text-rd-muted">
            <p class="flex items-center justify-between">
              <span>Average parse time</span>
              <span class="text-white">42s</span>
            </p>
            <p class="flex items-center justify-between">
              <span>Last completed run</span>
              <span class="text-white">Route 14 · 11:22 AM</span>
            </p>
          </div>
        </div>

        <div class="rounded-3xl border border-white/10 bg-white/[0.05] p-6 shadow-rd-card">
          <h3 class="text-sm font-semibold text-white">Tips for accuracy</h3>
          <ul class="mt-4 space-y-3 text-xs text-rd-secondary">
            <li>Ensure each row has SKU, quantity, and destination bin columns.</li>
            <li>Include machine ID in the filename to auto-link routes.</li>
            <li>Use CSV export if your ERP adds macros to Excel files.</li>
          </ul>
        </div>
      </aside>
    </section>

    <ng-template #pickersView>
      <section class="space-y-8">
        <header class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
          <div>
            <h2 class="text-2xl font-semibold text-white">Picker performance</h2>
            <p class="text-sm text-rd-secondary">Live snapshot from the last 24 hours of warehouse activity.</p>
          </div>
          <button
            type="button"
            class="inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/10 px-4 py-2 text-xs font-semibold text-rd-secondary transition hover:border-white/30 hover:text-white"
          >
            Export report
          </button>
        </header>

        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
          <div class="rounded-2xl border border-white/10 bg-white/[0.05] p-5 shadow-rd-card">
            <p class="text-xs text-rd-secondary">Average route duration</p>
            <p class="mt-3 text-2xl font-semibold text-white">41m</p>
            <p class="mt-1 text-xs text-rd-teal">14% faster than last week</p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-white/[0.05] p-5 shadow-rd-card">
            <p class="text-xs text-rd-secondary">Voice confirmations</p>
            <p class="mt-3 text-2xl font-semibold text-white">98.7%</p>
            <p class="mt-1 text-xs text-rd-secondary">5,214 verbal check-ins recorded</p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-white/[0.05] p-5 shadow-rd-card">
            <p class="text-xs text-rd-secondary">High priority bins</p>
            <p class="mt-3 text-2xl font-semibold text-white">12</p>
            <p class="mt-1 text-xs text-[#f9c74f]">Monitor restock this afternoon</p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-white/[0.05] p-5 shadow-rd-card">
            <p class="text-xs text-rd-secondary">Picker coverage</p>
            <p class="mt-3 text-2xl font-semibold text-white">7 / 8</p>
            <p class="mt-1 text-xs text-rd-secondary">One PTO · coverage holding</p>
          </div>
        </div>

        <div class="rounded-3xl border border-white/10 bg-white/[0.04] p-6 shadow-rd-card">
          <table class="min-w-full text-left text-sm text-rd-secondary">
            <thead>
              <tr class="text-xs uppercase tracking-wide text-rd-muted">
                <th class="pb-4 font-semibold">Picker</th>
                <th class="pb-4 font-semibold">Routes</th>
                <th class="pb-4 font-semibold">Avg. pace</th>
                <th class="pb-4 font-semibold">Accuracy</th>
                <th class="pb-4 font-semibold">Last sync</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-white/5 text-sm">
              <tr class="hover:bg-white/5">
                <td class="py-3 font-medium text-white">Octavia James</td>
                <td class="py-3">5</td>
                <td class="py-3">38m</td>
                <td class="py-3 text-rd-teal">99.4%</td>
                <td class="py-3">9 mins ago</td>
              </tr>
              <tr class="hover:bg-white/5">
                <td class="py-3 font-medium text-white">Luis Andrade</td>
                <td class="py-3">4</td>
                <td class="py-3">43m</td>
                <td class="py-3 text-rd-teal">98.1%</td>
                <td class="py-3">17 mins ago</td>
              </tr>
              <tr class="hover:bg-white/5">
                <td class="py-3 font-medium text-white">Kira Patel</td>
                <td class="py-3">3</td>
                <td class="py-3">41m</td>
                <td class="py-3 text-[#f9c74f]">96.8%</td>
                <td class="py-3">26 mins ago</td>
              </tr>
              <tr class="hover:bg-white/5">
                <td class="py-3 font-medium text-white">Sean Murphy</td>
                <td class="py-3">2</td>
                <td class="py-3">45m</td>
                <td class="py-3 text-rd-teal">99.1%</td>
                <td class="py-3">32 mins ago</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </ng-template>
  </main>
</div>

<div class="min-h-screen bg-slate-100 text-slate-900">
  @let session = session$ | async;
  @if (session) {
    <div class="flex min-h-screen">
      <aside class="flex w-64 flex-col border-r border-slate-200 bg-white px-5 py-6">
        <div class="mb-10">
          <p class="text-sm font-semibold text-slate-900">{{ session?.company?.name ?? 'Picker Agent' }}</p>
          <p class="text-xs uppercase tracking-wide text-slate-400">Dashboard</p>
        </div>

        @let isGodUser = session?.user?.role === 'GOD';
        @let isPlatformAdminContext =
          session?.user?.platformAdmin &&
          session?.platformAdminCompanyId &&
          session?.company?.id === session?.platformAdminCompanyId;
        <nav class="space-y-1">
          @for (tab of headerTabs; track tab.id) {
            @if (!tab.requiresAdminContext || isGodUser || isPlatformAdminContext) {
              <a
                class="flex items-center rounded-md px-3 py-2 text-sm font-medium text-blue-600 transition hover:bg-blue-50"
                [routerLink]="tab.route"
                routerLinkActive="bg-blue-50 text-blue-700"
                [routerLinkActiveOptions]="{ exact: true }"
              >
                {{ tab.label }}
              </a>
            }
          }
        </nav>

        <div class="mt-auto space-y-3 border-t border-slate-200 pt-4 text-sm">
          <div>
            <p class="font-medium text-slate-900">{{ session.user.firstName }} {{ session.user.lastName }}</p>
            <p class="text-xs text-slate-500">{{ session.user.email }}</p>
          </div>
          <button
            type="button"
            class="inline-flex w-full items-center justify-center rounded-md px-3 py-2 text-sm font-semibold text-blue-600 transition hover:bg-blue-50"
            (click)="onLogout()"
          >
            Log out
          </button>
        </div>
      </aside>

      <main class="flex-1 px-10 py-8">
        <router-outlet></router-outlet>
      </main>
    </div>
  } @else {
    <main class="min-h-screen px-6 py-12">
      <router-outlet></router-outlet>
    </main>
  }
</div>
